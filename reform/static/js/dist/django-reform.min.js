!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.DjangoReform=e()}}(function(){var e,t,n;return function r(e,t,n){function i(o,u){if(!t[o]){if(!e[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,r,e,t,n)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,n){t.exports=e("./src/reform")},{"./src/reform":20}],2:[function(e,t,n){var r=e("react"),i=e("../template-manager.js"),s=e("./widgets/templates/char_field.js"),o=e("./widgets/templates/text_field.js"),u=e("./widgets/templates/email_field.js"),a=e("./widgets/templates/url_field.js"),f=e("./widgets/templates/boolean_field.js"),l=e("./widgets/templates/integer_field.js"),c=e("./widgets/templates/decimal_field.js"),h=e("./widgets/templates/datetime_field.js"),p=e("./widgets/templates/date_field.js"),d=e("./widgets/templates/time_field.js"),v=e("./widgets/templates/select_field.js"),m=e("./widgets/templates/radio_select_field.js"),g=e("./widgets/templates/button.js");i.registerFieldTemplate("char",s),i.registerFieldTemplate("text",o),i.registerFieldTemplate("email",u),i.registerFieldTemplate("url",a),i.registerFieldTemplate("boolean",f),i.registerFieldTemplate("integer",l),i.registerFieldTemplate("decimal",c),i.registerFieldTemplate("date_time",h),i.registerFieldTemplate("date",p),i.registerFieldTemplate("time",d),i.registerFieldTemplate("select",v),i.registerFieldTemplate("radio_select",m),i.registerFieldTemplate("button",g)},{"../template-manager.js":21,"./widgets/templates/boolean_field.js":6,"./widgets/templates/button.js":7,"./widgets/templates/char_field.js":8,"./widgets/templates/date_field.js":9,"./widgets/templates/datetime_field.js":10,"./widgets/templates/decimal_field.js":11,"./widgets/templates/email_field.js":12,"./widgets/templates/integer_field.js":13,"./widgets/templates/radio_select_field.js":14,"./widgets/templates/select_field.js":15,"./widgets/templates/text_field.js":16,"./widgets/templates/time_field.js":17,"./widgets/templates/url_field.js":18,react:"react"}],3:[function(e,t,n){e("./field");var r=e("react"),i=e("../form-manager"),s=e("../template-manager"),o=e("../validation"),u=r.createClass({displayName:"ReForm",getInitialState:function(){return{errors:{},form:i.getForm(this.props.form),template:s.getFormTemplate(this.props.form),fields:null}},componentWillMount:function(){if(this.state.form===undefined)return;var e=[],t=this,n=null;this.props.instance&&(n=this.props.instance),this.state.form.fields.map(function(r,i){r.initial=n!=null?n[r.name]:r.initial;var o=s.getFieldTemplate(r.field_type,t.props.fieldPrefix);o&&e.push({field:r,key:"field-"+i,ref:r.name,prefix:t.props.fieldPrefix})}),this.setState({fields:e})},formData:function(e){if(this.state.form===undefined)return;var t={},n=this.state.form.fields,r,i,s,o,u;for(r=0;r<n.length;r+=1){s=n[r],inputs=e.querySelectorAll('[name="'+s.name+'"]');if(inputs.length===1)o=inputs[0];else for(i=0;i<inputs.length;i+=1)if(inputs[i].type==="radio"&&inputs[i].checked){o=inputs[i];break}o&&(u=o.value,o.type==="checkbox"&&(u=o.checked),t[s.name]=u)}if(this.props.hasOwnProperty("instance")&&this.props.instance){var a=this.state.form.id_field;t[a]=this.props.instance[a]}return t},clear:function(){this.getDOMNode().reset()},error:function(e){this.setState({errors:e})},validate:function(e){if(this.state.form===undefined)return;var t=this.state.form.fields,n=null,r,i,s,u;for(i=0;i<t.length;i+=1)s=t[i],u=e[s.name],r=o.validate(s,u),r.length>0&&(n=n||{},n[s.name]=r);n&&this.error(n)},onsubmit:function(e){e.preventDefault();var t=e.target;this.setState({errors:{}});var n=this.formData(t),r=this.validate(n);"onsubmit"in this.props&&this.props.onsubmit(n,this.formUrls())},formUrls:function(){return this.state.form===undefined?null:{create:this.state.form.create_url,update:this.state.form.update_url}},render:function(){var e=this.state.template;return this.props.formless?r.createElement(e,{ref:"form",errors:this.state.errors,fields:this.state.fields},this.props.children):r.createElement("form",{onSubmit:this.onsubmit,className:this.props.className},r.createElement(e,{ref:"form",errors:this.state.errors,fields:this.state.fields},this.props.children))}});t.exports=u},{"../form-manager":19,"../template-manager":21,"../validation":22,"./field":2,react:"react"}],4:[function(e,t,n){var r=e("react"),i=r.createClass({displayName:"ErrorList",render:function(){if(this.props.errors&&this.props.errors.length>0){var e=this.props.errors;return e instanceof Array||(e=[e]),r.createElement("ul",null,e.map(function(e,t){return r.createElement("li",{key:"err-"+t},e)}))}return r.createElement("span",null)}});t.exports=i},{react:"react"}],5:[function(e,t,n){var r=e("react"),i=r.createClass({displayName:"Input",render:function(){var e={};return this.props.step&&(e.step=this.props.step),this.props.field.required&&(e.required="required"),this.props.field.className&&(e.className=this.props.field.className),r.createElement("input",r.__spread({type:this.props.type,name:this.props.field.name,id:this.props.field.id_field,defaultValue:this.props.field.initial},e))}});t.exports=i},{react:"react"}],6:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"checkbox",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors
:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],7:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("button",{defaultValue:this.props.field.initial,type:"submit"},this.props.field.label))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],8:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"text",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],9:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"date",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],10:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"datetime-local",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],11:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",decimalPlacesToSteps:function(){var e=this.props.field.decimal_places,t,n,r=[];if(e===null)return"0.01";if(e>0){for(t=0;t<e;t+=1)r.push("0");r.splice(1,0,".")}return r.push("1"),n=r.join(""),n},render:function(){var e=this.decimalPlacesToSteps();return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"number",step:e,field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],12:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"email",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],13:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"number",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],14:[function(e,t,n){var r=e("react"),i=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){var e=this.props.field.key_field,t=this.props.field.label_field,n={};this.props.field.required&&(n.required="required");var s=this.props.field;return r.createElement("div",{className:"reform-field"},s.label,s.choices.map(function(i,o){return r.createElement("label",{htmlFor:s.id_field+"_"+o,key:"label-"+o},r.createElement("input",r.__spread({type:"radio",name:s.name,id:s.id_field+"_"+o,key:"opt-"+o,value:i[e]},n)),i[t])}),r.createElement("div",null,this.props.field.help_text),r.createElement(i,{errors:this.props.errors}))}})},{"./base_error_list":4,react:"react"}],15:[function(e,t,n){var r=e("react"),i=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){var e=this.props.field.key_field,t=this.props.field.label_field,n={};return this.props.field.required&&(n.required="required"),this.props.onChange&&(n.onChange=this.props.onChange),r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement("select",r.__spread({name:this.props.field.name,id:this.props.field.id_field,defaultValue:this.props.field.initial},n),this.props.field.choices.map(function(n,i){return r.createElement("option",{key:"opt-"+i,value:n[e]},n[t])})),r.createElement("div",null,this.props.field.help_text),r.createElement(i,{errors:this.props.errors}))}})},{"./base_error_list":4,react:"react"}],16:[function(e,t,n){var r=e("react"),i=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement("textarea",{name:this.props.field.name,id:this.props.field.id_field,defaultValue:this.props.field.initial}),r.createElement("div",null,this.props.field.help_text),r.createElement(i,{errors:this.props.errors}))}})},{"./base_error_list":4,react:"react"}],17:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render
:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"time",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],18:[function(e,t,n){var r=e("react"),i=e("./base_text_input"),s=e("./base_error_list");t.exports=r.createClass({displayName:"exports",render:function(){return r.createElement("div",{className:"reform-field"},r.createElement("label",{htmlFor:this.props.field.id_field},this.props.field.label),r.createElement(i,{type:"url",field:this.props.field}),r.createElement("div",null,this.props.field.help_text),r.createElement(s,{errors:this.props.errors}))}})},{"./base_error_list":4,"./base_text_input":5,react:"react"}],19:[function(e,t,n){var r=r||{},i={};r.digestForms=function(){var e,t,n,r;for(e in window.reforms)t=window.reforms[e],i[e]=t},r.getForm=function(e,t){var n=i[e];t=t||{};var r=t.key||"form-"+Date.now(),s=t.initial,o=t.create,u=t.update,a=t.parent;return n},r.digestForms(),t.exports={getForm:r.getForm}},{}],20:[function(e,t,n){var r=e("./components/form"),i=e("./template-manager"),s=e("./components/widgets/templates/base_error_list"),o=e("./form-manager");t.exports={ReForm:r,TemplateManager:i,ErrorList:s,FormManager:o}},{"./components/form":3,"./components/widgets/templates/base_error_list":4,"./form-manager":19,"./template-manager":21}],21:[function(e,t,n){"use strict";var r=e("react"),i={},s={},o={},u=u||{},a=r.createClass({displayName:"DefaultFormTemplate",render:function(){var e=this;return r.createElement("div",null,this.props.fields.map(function(t,n){var i=u.getFieldTemplate(t.field.field_type,t.prefix);return r.createElement(i,{key:t.key,field:t.field,errors:e.props.errors[t.field.name]})}),this.props.children)}});u.registerFormTemplate=function(e,t){i[e]=t},u.getFormTemplate=function(e){var t=i[e];return t===undefined?a:t},u.registerFieldTemplate=function(e,t,n){var r=e;n&&(r=n+"-"+r),s[r]=t},u.getFieldTemplate=function(e,t){var n=e;return t&&(n=t+"-"+n),s[n]},u.registerTemplate=function(e,t){o[e]=t},u.getTemplate=function(e){return o[e]},t.exports=u},{react:"react"}],22:[function(e,t,n){function r(e,t){return e.length>t.max_length?"Can't be longer than "+t.max_length+" characters":null}function i(e,t){var n=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return n.test(e)?null:"Invalid email"}function s(e,t){var n=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;return n.test(e)?null:"Invalid url"}function o(e,t){return e<t.min_value?"Needs to be at least "+t.min_value:null}function u(e,t){return e>t.max_value?"Can't be more than "+t.max_value:null}function f(e,t){var n,r,i,s,o=[];for(n=0;n<e.validators.length;n+=1)r=e.validators[n],i=a[r.name],s=i(t,r),s&&(e.error_messages&&r.name in e.error_messages?o.push(e.error_messages[r.name]):o.push(s));return o}var a={max_length:r,email:i,url:s,min_value:o,max_value:u};t.exports={validate:f}},{}]},{},[1])(1)});
